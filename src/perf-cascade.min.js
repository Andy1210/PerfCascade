/*PerfCascade build:25/01/2016 */
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d={removeAllChildren:function(a){for(;a.childNodes.length>0;)a.removeChild(a.childNodes[0])},forEach:function(a,b){Array.prototype.forEach.call(a,b)},filter:function(a,b){return Array.prototype.filter.call(a,b)}};Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d},{}],2:[function(a,b,c){var d={lock:function(a,b,c,d){void 0===d&&(d=1);var e=new DOMParser,f=e.parseFromString('\n    <svg x="'+a+'" y="'+b+'" xmlns="http://www.w3.org/2000/svg">\n      <g class="icon icon-lock" transform="scale('+d+')">\n        <g transform="scale(0.833333)">\n          <path stroke-width="2" stroke-miterlimit="10" d="M9 8v-4c0-1.7-1.3-3-3-3s-3 1.3-3 3v2" fill="none"></path>\n          <path d="M0 6h12v8h-12z"></path>\n          <title>'+c+"</title>\n        </g>\n      </g>\n    </svg>\n    ","image/svg+xml");return f.firstChild}};Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d},{}],3:[function(a,b,c){var d={parseUrl:function(a){var b=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),c=a.match(b);return{scheme:c[2],authority:c[4],path:c[5],query:c[7],fragment:c[9]}}};Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d},{}],4:[function(a,b,c){var d={newEl:function(a,b,c){var d=document.createElementNS("http://www.w3.org/2000/svg",a);b=b||{};for(var e in b)"text"!=e&&d.setAttributeNS(null,e,b[e]);return d.textContent=b.text||"",c&&d.style&&Object.keys(c).forEach(function(a){d.style[a]=c[a]}),d},newSvg:function(a,b,c){return b=b||{},b["class"]=a,d.newEl("svg:svg",b,c)},newG:function(a,b,c){return b=b||{},b["class"]=a,d.newEl("g",b,c)},newTextEl:function(a,b,c,e){e=e||{};var f={fill:"#111",y:b.toString(),text:a};return void 0!==c&&(f.x=c),void 0===e.textShadow&&(e.textShadow="0 0 4px #fff"),d.newEl("text",f,e)},getNodeTextWidth:function(a){var b=d.newEl("svg:svg",{},{visibility:"hidden"});b.appendChild(a),window.document.body.appendChild(b);var c=a.getBBox().width;return b.parentNode.removeChild(b),c},addClass:function(a,b){return a.classList?a.classList.add(b):a.setAttribute("class",a.getAttribute("class")+" "+b),a},removeClass:function(a,b){return a.classList?a.classList.remove(b):a.setAttribute("class",a.getAttribute("class").replace(new RegExp("(\\s|^)"+b+"(\\s|$)","g"),"$2")),a}};Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d},{}],5:[function(a,b,c){function d(a){alert(a)}function e(a){var b=i["default"].transfrom(a);h["default"].removeAllChildren(j),j.appendChild(g.createWaterfallSvg(b,window.innerWidth>920?250:200,23))}function f(a){var b=a.target.files;if(!b)return void d("Failed to load HAR file");var c=new FileReader;c.onload=function(a){var b;try{b=JSON.parse(a.target.result)}catch(a){return void d("File does not seem to be a valid HAR file")}e(b.log)},c.readAsText(b[0])}var g=a("./waterfall/svg-chart"),h=a("./helpers/dom"),i=a("./transformers/har"),j=document.getElementById("output");document.getElementById("fileinput").addEventListener("change",f,!1),0===location.host.indexOf("127.0.0.1")&&window.fetch("test-data/github.com.151226_X7_b43d35e592fab70e0ba012fe11a41020.har").then(function(a){return a.json().then(function(a){return e(a.log)})})},{"./helpers/dom":1,"./transformers/har":6,"./waterfall/svg-chart":9}],6:[function(a,b,c){var d=a("../typing/time-block"),e=a("./styling-converters"),f=function(){function a(){}return a.transfrom=function(a){var b=this;console.log("HAR created by %s(%s) of %s page(s)",a.creator.name,a.creator.version,a.pages.length),window.data=a;var c=0,f=a.pages[c],g=new Date(f.startedDateTime).getTime(),h=f.pageTimings,i=0,j=a.entries.filter(function(a){return a.pageref===f.id}).map(function(a){var c=new Date(a.startedDateTime).getTime()-g;i<c+a.time&&(i=c+a.time);a.timings;return new d["default"](a.request.url,c,parseInt(a._all_end)||c+a.time,e.mimeToCssClass(a.response.content.mimeType),b.buildDetailTimingBlocks(c,a),a)}),k=Object.keys(h).filter(function(a){return void 0!=h[a]&&h[a]>=0}).sort(function(a,b){return h[a]>h[b]?1:-1}).map(function(a){var b=h[a];return{name:a.replace(/^[_]/,""),startTime:b}});return{durationMs:i,blocks:j,marks:k,lines:[]}},a.getTimePair=function(a,b,c,d){var e;switch(a){case"wait":e="ttfb";break;case"receive":e="download";break;default:e=a}var f=parseInt(b["_"+e+"_start"]),g=parseInt(b["_"+e+"_end"]),h=f||(c.length>0?c[c.length-1].end:d),i=g||h+b.timings[a];return{start:h,end:i}},a.buildDetailTimingBlocks=function(a,b){var c=this,e=b.timings;return["blocked","dns","connect","send","wait","receive"].reduce(function(f,g){var h=c.getTimePair(g,b,f,a);if(h.end&&h.start>=h.end)return f;if("connect"===g&&e.ssl&&-1!==e.ssl){var i=parseInt(b._ssl_start)||h.start,j=parseInt(b._ssl_end)||h.start+e.ssl,k=parseInt(b._ssl_start)?h.start:j;return f.concat([new d["default"]("ssl",i,j,"block-ssl")]).concat([new d["default"](g,k,h.end,"block-"+g)])}return f.concat([new d["default"](g,h.start,h.end,"block-"+g)])},[])},a}();Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=f},{"../typing/time-block":8,"./styling-converters":7}],7:[function(a,b,c){function d(a){var b=function(a){var b=a.split("/");switch(b[0]){case"image":return"image";case"font":return"font"}switch(b[1]){case"svg+xml":case"html":return"html";case"css":return"css";case"vnd.ms-fontobject":case"font-woff":case"font-woff2":case"x-font-truetype":case"x-font-opentype":case"x-font-woff":return"font";case"javascript":case"x-javascript":case"script":case"json":return"javascript";case"x-shockwave-flash":return"flash"}return"other"};return"block-"+b(a)}c.mimeToCssClass=d},{}],8:[function(a,b,c){var d=function(){function a(a,b,c,d,e,f){void 0===d&&(d=""),void 0===e&&(e=[]),this.name=a,this.start=b,this.end=c,this.cssClass=d,this.segments=e,this.rawResource=f,this.total="number"!=typeof b||"number"!=typeof c?void 0:c-b}return a}();Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d},{}],9:[function(a,b,c){function d(a){var b=40;if(a.length<b)return a.replace(/http[s]\:\/\//,"");var c=i["default"].parseUrl(a);if((c.authority+c.path).length<b)return c.authority+c.path;var d=c.path.split("/");return c.authority+"â€¦/"+d[d.length-1]}function e(a,b,c){var d=a.reduce(function(a,b){return Math.max(a,g["default"].getNodeTextWidth(g["default"].newTextEl(b.name,0)))},0);return c+d+35}function f(a,b,c){void 0===b&&(b=250),void 0===c&&(c=23);var f=a.durationMs/100,i=a.blocks.filter(function(a){return"number"==typeof a.start&&"number"==typeof a.total}).sort(function(a,b){return(a.start||0)-(b.start||0)}),n=(i.length+1)*c,o=e(a.marks,i,n),p=g["default"].newSvg("water-fall-chart",{height:Math.floor(o)},{paddingLeft:b+"px"}),q=g["default"].newSvg("left-fixed-holder",{x:"-"+b,width:b}),r=g["default"].newSvg("flex-scale-waterfall"),s=g["default"].newG("hover-overlays"),t=g["default"].newG("overlays"),u=g["default"].newG("bg-stripes"),v=g["default"].newEl("clipPath",{id:"titleClipPath"});v.appendChild(g["default"].newEl("rect",{width:b,height:"100%"})),q.appendChild(v);var w=j.createAlignmentLines(n);s.appendChild(w.startline),s.appendChild(w.endline);var x=j.makeHoverEvtListeners(w);return r.appendChild(j.createTimeScale(a.durationMs,n)),r.appendChild(j.createMarks(a.marks,f,n)),a.lines.forEach(function(a,b){p.appendChild(j.createBgRect(a,f,n))}),i.forEach(function(a,e){var g=a.total||1,i=c*e,j=a.start||.001,n={width:g,height:c,x:j,y:i,cssClass:a.cssClass,label:a.name+" ("+a.start+"ms - "+a.end+"ms | total: "+a.total+"ms)",unit:f,showOverlay:x.onMouseEnterPartial,hideOverlay:x.onMouseLeavePartial},o=k.createRect(n,a.segments),p=k.createRequestLabelClipped(25,i,d(a.name),c,"clipPath"),s=k.createRequestLabelFull(25,i,a.name,c),v=l.createRowInfoOverlay(e+1,j,i+c,a,b,f),w=function(a){m["default"].removeAllChildren(t),t.appendChild(v)},y=k.createFixedRow(i,c,w,b),z=k.createFlexRow(i,c,w);z.appendChild(o);var A=0===a.name.indexOf("https://");A&&y.appendChild(h["default"].lock(5,i+3,"Secure Connection",1.2)),k.appendRequestLabels(y,p,s),r.appendChild(z),q.appendChild(y),u.appendChild(k.createBgStripe(i,c,b,e%2===0))}),r.appendChild(s),p.appendChild(u),p.appendChild(r),p.appendChild(q),p.appendChild(t),p}var g=a("../helpers/svg"),h=a("../helpers/icons"),i=a("../helpers/misc"),j=a("./svg-general-components"),k=a("./svg-row-components"),l=a("./svg-details-overlay"),m=a("../helpers/dom");c.createWaterfallSvg=f},{"../helpers/dom":1,"../helpers/icons":2,"../helpers/misc":3,"../helpers/svg":4,"./svg-details-overlay":10,"./svg-general-components":11,"./svg-row-components":12}],10:[function(a,b,c){function d(a){var b=j["default"].newEl("a",{"class":"info-overlay-close-btn"});return b.appendChild(j["default"].newEl("rect",{width:25,height:25,x:"100%",y:a,rx:5,ry:5})),b.appendChild(j["default"].newEl("text",{width:25,height:25,x:"100%",y:a,dx:9,dy:17,fill:"#111",text:"X",textAnchor:"middle"})),b.appendChild(j["default"].newEl("title",{text:"Close Overlay"})),b}function e(a,b){var c=j["default"].newEl("g",{"class":"info-overlay-holder",transform:"translate(-"+b+")"}),d=j["default"].newEl("rect",{width:"100%",height:350,x:"0",y:a,rx:2,ry:2,"class":"info-overlay"});return c.appendChild(d),c}function f(a,b){var c=b.rawResource,d=function(a,b){return"number"!=typeof a||0>=a?void 0:b(a)},e=function(a){return d(a,function(a){return a+" byte (~"+Math.round(a/1024*10)/10+"kb)"})},f=function(a){return d(a,function(a){return a+"ms"})},g=function(a){var b=c.request.headers.filter(function(b){return b.name.toLowerCase()===a.toLowerCase()})[0];return b?b.value:""},h=function(a){var b=c.response.headers.filter(function(b){return b.name.toLowerCase()===a.toLowerCase()})[0];return b?b.value:""},i=function(a){return c.name||""};return{general:{"Request Number":"#"+a,Started:new Date(c.startedDateTime).toLocaleString()+" ("+f(b.start)+" after page reqest started)",Duration:f(c.time),Status:c.response.status+" "+c.response.statusText,"Server IPAddress":c.serverIPAddress,Connection:c.connection,Initiator:i("_initiator"),"Initiator Line":i("_initiator_line"),Expires:i("_expires"),"Cache Time":i("_cache_time"),"CDN Provider":i("_cdn_provider"),"Gzip Total":i("_gzip_total"),"Minify Total":i("_minify_total"),"Minify Save":i("_minify_save"),"Image Total":i("_image_total"),"Image Save":i("_image_save")},request:{Method:c.request.method,"HTTP Version":c.request.httpVersion,"Headers Size":e(c.request.headersSize),"Body Size":e(c.request.bodySize),Comment:c.request.comment,"User-Agent":g("User-Agent"),Host:g("Host"),Connection:g("Connection"),Accept:g("Accept"),"Accept-Encoding":g("Accept-Encoding"),"Accept-Language":g("Accept-Language"),"Querystring parameters count":c.request.queryString.length,"Cookies count":c.request.cookies.length},response:{Status:c.response.status+" "+c.response.statusText,"HTTP Version":c.response.httpVersion,"Header Size":e(c.response.headersSize),"Body Size":e(c.response.bodySize),"Content-Type":h("Content-Type"),"Cache-Control":h("Cache-Control"),Expires:h("Expires"),"Last-Modified":h("Last-Modified"),Server:h("Server"),"Timing-Allow-Origin":h("Timing-Allow-Origin"),"Content-Length":h("Content-Length"),"Content Size":c.response.content.size,"Content Compression":c.response.content.compression,Connection:h("Connection"),"X-Served-By":h("X-Served-By"),Vary:h("Vary"),"Redirect URL":c.response.redirectURL,Comment:c.response.comment}}}function g(a){return Object.keys(a).filter(function(b){return void 0!==a[b]&&-1!==a[b]&&0!==a[b]&&""!==a[b]}).map(function(b){return"\n      <dt>"+b+"</dt>\n      <dd>"+a[b]+"</dd>\n    "}).join("")}function h(a,b){var c=document.createElement("body");c.setAttribute("xmlns","http://www.w3.org/1999/xhtml");var d=f(a,b),e=g(d.general),h=g(d.request),i=g(d.response);return c.innerHTML='\n    <div class="wrapper">\n      <h3>#'+a+" "+b.name+'</h3>\n      <nav class="tab-nav">\n      <ul>\n        <li><button class="tab-button">General</button></li>\n        <li><button class="tab-button">Request</button></li>\n        <li><button class="tab-button">Response</button></li>\n        <li><button class="tab-button">Raw Data</button></li>\n      </ul>\n      </nav>\n      <div class="tab">\n        <dl>\n          '+e+'\n        </dl>\n      </div>\n      <div class="tab">\n        <dl>\n          '+h+'\n        </dl>\n      </div>\n      <div class="tab">\n        <dl>\n          '+i+'\n        </dl>\n      </div>\n      <div class="tab">\n        <code>\n          <pre>'+JSON.stringify(b.rawResource,null,2)+"</pre>\n        </code>\n      </div>\n    </div>\n    ",c}function i(a,b,c,f,g,i){var l=e(c,g),m=j["default"].newEl("foreignObject",{width:"100%",height:250,x:"0",y:c,dy:"5",dx:"5"}),n=d(c);n.addEventListener("click",function(a){return l.parentElement.removeChild(l)});var o=h(a,f),p=o.getElementsByClassName("tab-button"),q=o.getElementsByClassName("tab"),r=function(a){k["default"].forEach(q,function(b,c){b.style.display=a===c?"block":"none",p.item(c).classList.toggle("active",a===c)})};return k["default"].forEach(p,function(a,b){a.addEventListener("click",function(){r(b)})}),r(0),m.appendChild(o),l.appendChild(m),l.appendChild(n),l}var j=a("../helpers/svg"),k=a("../helpers/dom");c.createRowInfoOverlay=i},{"../helpers/dom":1,"../helpers/svg":4}],11:[function(a,b,c){function d(a){return{endline:i["default"].newEl("line",{x1:"0",y1:"0",x2:"0",y2:a,"class":"line-end"}),startline:i["default"].newEl("line",{x1:"0",y1:"0",x2:"0",y2:a,"class":"line-start"})}}function e(a){return{onMouseEnterPartial:function(){return function(b){var c=b.target;i["default"].addClass(c,"active");var d=c.x.baseVal.valueInSpecifiedUnits+c.width.baseVal.valueInSpecifiedUnits+"%",e=c.x.baseVal.valueInSpecifiedUnits+"%";a.endline.x1.baseVal.valueAsString=d,a.endline.x2.baseVal.valueAsString=d,a.startline.x1.baseVal.valueAsString=e,a.startline.x2.baseVal.valueAsString=e,i["default"].addClass(a.endline,"active"),i["default"].addClass(a.startline,"active")}},onMouseLeavePartial:function(){return function(b){var c=b.target;i["default"].removeClass(c,"active"),i["default"].removeClass(a.endline,"active"),i["default"].removeClass(a.startline,"active")}}}}function f(a,b){for(var c=i["default"].newEl("g",{"class":"time-scale full-width"}),d=0,e=a/1e3,f=100/e;e>=d;d++){var g=i["default"].newTextEl(d+"sec",b);d>e-.2?(g.setAttribute("x",f*d-.5+"%"),g.setAttribute("text-anchor","end")):g.setAttribute("x",f*d+.5+"%");var h=i["default"].newEl("line",{x1:f*d+"%",y1:"0",x2:f*d+"%",y2:b});c.appendChild(h),c.appendChild(g)}return c}function g(a,b,c){var d=i["default"].newEl("rect",{width:(a.total||1)/b+"%",height:c,x:(a.start||.001)/b+"%",y:0,"class":a.cssClass||"block-other"});return d.appendChild(i["default"].newEl("title",{text:a.name})),d}function h(a,b,c){var d=i["default"].newEl("g",{transform:"scale(1, 1)","class":"marker-holder"});return a.forEach(function(e,f){var g=e.startTime/b,h=i["default"].newEl("g",{"class":"mark-holder type-"+e.name.toLowerCase()}),j=i["default"].newEl("g",{"class":"line-holder"}),k=i["default"].newEl("g",{"class":"line-label-holder",x:g+"%"});e.x=g;var l=i["default"].newTextEl(e.name,c+25);l.setAttribute("x",g+"%"),l.setAttribute("stroke",""),j.appendChild(i["default"].newEl("line",{x1:g+"%",y1:0,x2:g+"%",y2:c}));var m=a[f-1];m&&e.x-m.x<1&&(l.setAttribute("x",m.x+1+"%"),e.x=m.x+1),j.appendChild(i["default"].newEl("line",{x1:g+"%",y1:c,x2:e.x+"%",y2:c+23}));var n=!1,o=function(a){n||(n=!0,i["default"].addClass(j,"active"),h.parentNode.appendChild(h))},p=function(a){n=!1,i["default"].removeClass(j,"active")};l.addEventListener("mouseenter",o),l.addEventListener("mouseleave",p),k.appendChild(l),h.appendChild(i["default"].newEl("title",{text:e.name+" ("+Math.round(e.startTime)+"ms)"})),h.appendChild(j),h.appendChild(k),d.appendChild(h)}),d}var i=a("../helpers/svg");c.createAlignmentLines=d,c.makeHoverEvtListeners=e,c.createTimeScale=f,c.createBgRect=g,c.createMarks=h},{"../helpers/svg":4}],12:[function(a,b,c){function d(a,b){var c,e=a.height-1,f=l["default"].newEl("rect",{width:a.width/a.unit+"%",height:e,x:Math.round(a.x/a.unit*100)/100+"%",y:a.y,"class":(b&&b.length>0?"time-block":"segment")+" "+(a.cssClass||"block-other")});return a.label&&f.appendChild(l["default"].newEl("title",{text:a.label})),f.addEventListener("mouseenter",a.showOverlay(a)),f.addEventListener("mouseleave",a.hideOverlay(a)),b&&b.length>0?(c=l["default"].newEl("g",{"class":"rect-holder"}),c.appendChild(f),b.forEach(function(b){if(b.total>0&&"number"==typeof b.start){var f={width:b.total,height:e-5,x:b.start||.001,y:a.y,cssClass:b.cssClass,label:b.name+" ("+Math.round(b.start)+"ms - "+Math.round(b.end)+"ms | total: "+Math.round(b.total)+"ms)",unit:a.unit,showOverlay:a.showOverlay,hideOverlay:a.hideOverlay};c.appendChild(d(f))}}),c):f}function e(a,b,c,d,e){var f=g(a,b,c,d);return f.style.clipPath="url(#titleClipPath)",f}function f(a,b,c,d){var e=g(a,b,c,d),f=l["default"].newG("full-lable");return f.appendChild(l["default"].newEl("rect",{"class":"label-full-bg",x:a-3,y:b+3,width:l["default"].getNodeTextWidth(e),height:d-4,rx:5,ry:5})),f.appendChild(e),f}function g(a,b,c,d){var e=c.replace(/http[s]\:\/\//,""),f=l["default"].newTextEl(e,b+Math.round(d/2)+5);return f.appendChild(l["default"].newEl("title",{text:c})),f.setAttribute("x",a.toString()),f.style.opacity=c.match(/js.map$/)?"0.5":"1",f}function h(a,b,c){var d=c.getElementsByTagName("rect")[0],e=c.getElementsByTagName("text")[0];c.style.display="none",c.style.visibility="hidden",a.appendChild(b),a.appendChild(c),a.addEventListener("mouseenter",function(){c.style.display="block",b.style.display="none",c.style.visibility="visible",d.style.width=(e.clientWidth+10).toString()}),a.addEventListener("mouseleave",function(){b.style.display="block",c.style.display="none",c.style.visibility="hidden"})}function i(a,b,c,d){var e=l["default"].newEl("g",{"class":d?"even":"odd"});return e.appendChild(l["default"].newEl("rect",{width:"100%",height:b,x:0,y:a,"class":"flex"})),e.appendChild(l["default"].newEl("rect",{width:c,height:b,x:"-"+c,y:a,"class":"fixed"})),e}function j(a,b,c,d){var e=l["default"].newEl("g",{"class":"row row-fixed"});return e.appendChild(l["default"].newEl("rect",{width:d,height:b,x:"0",y:a,opacity:"0"})),e.addEventListener("click",c),e}function k(a,b,c){var d=l["default"].newEl("g",{"class":"row row-flex"});return d.appendChild(l["default"].newEl("rect",{width:"100%",height:b,x:"0",y:a,opacity:"0"})),d.addEventListener("click",c),d}var l=a("../helpers/svg");c.createRect=d,c.createRequestLabelClipped=e,c.createRequestLabelFull=f,c.appendRequestLabels=h,c.createBgStripe=i,c.createFixedRow=j,c.createFlexRow=k},{"../helpers/svg":4}]},{},[5]);